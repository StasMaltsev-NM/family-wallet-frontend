# –ß–ï–ö-–õ–ò–°–¢ –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –ê–†–•–ò–¢–ï–ö–¢–£–†–´ v0.27

**–¶–µ–ª—å:** –ü—Ä–∏–≤–µ—Å—Ç–∏ –∫–æ–¥ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å `ARCHITECTURE_TRUTH_v027.md`

---

## üîç –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï (—á—Ç–æ –µ—Å—Ç—å –≤ –∫–æ–¥–µ)

### –≠–∫—Ä–∞–Ω—ã:
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (—Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚ùå "–ú–æ–∏ –¥–µ—Ç–∏" (—Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–µ—Ç–µ–π) ‚Äî –£–ë–†–ê–¢–¨
- ‚ùå –ö–û–®–ï–õ–ï–ö (–ø—Ä–æ—Ñ–∏–ª—å —Ä–µ–±—ë–Ω–∫–∞) ‚Äî –ù–ï–¢, –°–û–ó–î–ê–¢–¨
- ‚úÖ –ú–∏—Å—Å–∏–∏ (—á–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ –ú–∞–≥–∞–∑–∏–Ω (—Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—ã (—Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚ö†Ô∏è –ò–ò (—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –≤ –ø—Ä–æ—Ñ–∏–ª–µ —Ä–µ–±—ë–Ω–∫–∞)

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- ‚ùå –í–µ—Ä—Ö–Ω—è—è —à–∞–ø–∫–∞ (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –¥–µ—Ç–µ–π) ‚Äî –ù–ï–¢
- ‚úÖ –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (–µ—Å—Ç—å)
- ‚ùå –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∫—Ä–∞—Å–Ω—ã–µ —Ü–∏—Ñ–µ—Ä–∫–∏) ‚Äî –ù–ï–¢

### –î–∞–Ω–Ω—ã–µ:
- ‚ùå `selectedChildId` (–≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è) ‚Äî –ù–ï–¢
- ‚ùå –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `child_id` ‚Äî –ù–ï–¢
- ‚ùå –ú–∏—Å—Å–∏–∏ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ (–ø–æ —Ä–µ–±—ë–Ω–∫—É) ‚Äî –ù–ï–¢
- ‚ùå –ù–∞–≥—Ä–∞–¥—ã –Ω–∞ –≤—Ä—É—á–µ–Ω–∏–µ (–ø–æ —Ä–µ–±—ë–Ω–∫—É) ‚Äî –ù–ï–¢
- ‚ùå –ò—Å—Ç–æ—Ä–∏—è (–ø–æ —Ä–µ–±—ë–Ω–∫—É) ‚Äî –ù–ï–¢

---

## ‚úÖ –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ (–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)

### –ü–†–ò–û–†–ò–¢–ï–¢ 1: –ö–†–ò–¢–ò–ß–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

**1.1 –î–æ–±–∞–≤–∏—Ç—å `selectedChildId`**
- [ ] –û–±—ä—è–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `let selectedChildId = null;`
- [ ] –ü—Ä–∏ –ª–æ–≥–∏–Ω–µ: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `selectedChildId = –ø–µ—Ä–≤—ã–π —Ä–µ–±—ë–Ω–æ–∫`
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ `localStorage` (–¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤—Ö–æ–¥–∞)
- [ ] –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ–±—ë–Ω–∫–∞: –æ–±–Ω–æ–≤–∏—Ç—å `selectedChildId`

**1.2 –°–æ–∑–¥–∞—Ç—å –≤–µ—Ä—Ö–Ω—é—é —à–∞–ø–∫—É**
- [ ] HTML: `<div id="topBar">` (–≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞)
- [ ] –õ–æ–≥–æ—Ç–∏–ø "Family Wallet"
- [ ] –°–ø–∏—Å–æ–∫ –¥–µ—Ç–µ–π (–∞–≤–∞—Ç–∞—Ä–∫–∏): `renderChildrenTabs()`
- [ ] –ö–Ω–æ–ø–∫–∞ "+" (–¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–±—ë–Ω–∫–∞)
- [ ] –ò–∫–æ–Ω–∫–∏: AI (üé®), –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (‚öôÔ∏è)
- [ ] –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞: `switchChild(childId)`

**1.3 –°–æ–∑–¥–∞—Ç—å —ç–∫—Ä–∞–Ω –ö–û–®–ï–õ–ï–ö**
- [ ] HTML: `<div id="tab-wallet" class="tab-content">`
- [ ] –ö–∞—Ä—Ç–æ—á–∫–∞ "–ë–ê–õ–ê–ù–°": `renderBalance(childId)`
- [ ] –ö–∞—Ä—Ç–æ—á–∫–∞ "–ù–ê –ü–†–û–í–ï–†–ö–ï": `renderPendingCount(childId)`
- [ ] –ú–µ—á—Ç–∞ + –ø—Ä–æ–≥—Ä–µ—Å—Å: `renderDream(childId)`
- [ ] –°–ø–∏—Å–æ–∫ –Ω–∞–≥—Ä–∞–¥ –Ω–∞ –≤—Ä—É—á–µ–Ω–∏–µ: `renderRewardsToDeliver(childId)`
- [ ] –ù–µ–¥–∞–≤–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è: `renderRecentEvents(childId, 5)`

**1.4 –£–±—Ä–∞—Ç—å —ç–∫—Ä–∞–Ω "–ú–æ–∏ –¥–µ—Ç–∏"**
- [ ] –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª–∏—Ç—å `<div id="tab-home">` (—Å—Ç–∞—Ä—ã–π)
- [ ] –£–¥–∞–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏: `loadAllChildren()`, `renderAllChildren()`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–Ω: –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞ ‚Üí `showTab('tab-wallet')`

---

### –ü–†–ò–û–†–ò–¢–ï–¢ 2: –§–ò–õ–¨–¢–†–ê–¶–ò–Ø –î–ê–ù–ù–´–•

**2.1 –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ backend**
- [ ] `loadPendingTasks(childId)` ‚Üí `WHERE child_id = ?`
- [ ] `loadRewards(childId)` ‚Üí `WHERE child_id = ?`
- [ ] `loadHistory(childId, limit)` ‚Üí `WHERE child_id = ? LIMIT ?`
- [ ] `loadMissions(childId)` ‚Üí `WHERE child_id = ?`

**2.2 –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏**
- [ ] `loadChildWallet(childId)` ‚Üí –±–∞–ª–∞–Ω—Å, –º–µ—á—Ç–∞
- [ ] `loadPendingTasksCount(childId)` ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏—Å—Å–∏–π –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ
- [ ] `loadRewardsToDeliver(childId)` ‚Üí —Å–ø–∏—Å–æ–∫ –Ω–∞–≥—Ä–∞–¥
- [ ] `loadRecentEvents(childId, 5)` ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –æ–ø–µ—Ä–∞—Ü–∏–π

---

### –ü–†–ò–û–†–ò–¢–ï–¢ 3: –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø

**3.1 –ö—Ä–∞—Å–Ω—ã–µ —Ü–∏—Ñ–µ—Ä–∫–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫–∞—Ö**
- [ ] –ì–õ–ê–í–ù–ê–Ø (–ö–û–®–ï–õ–ï–ö): –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏—Å—Å–∏–π –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ
- [ ] –ú–ò–°–°–ò–ò: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∏—Å—Å–∏–π
- [ ] –ú–ê–ì–ê–ó–ò–ù: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–≥—Ä–∞–¥ –Ω–∞ –≤—Ä—É—á–µ–Ω–∏–µ

**3.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
- [ ] –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö: –æ–±–Ω–æ–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫–∏
- [ ] –ü—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–∏ (–ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –º–∏—Å—Å–∏—é): –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å

---

### –ü–†–ò–û–†–ò–¢–ï–¢ 4: –õ–û–ì–ò–ö–ê –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø

**4.1 –§—É–Ω–∫—Ü–∏—è `switchChild(childId)`**
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `selectedChildId`
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ `localStorage`
- [ ] –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Ö–Ω—é—é —à–∞–ø–∫—É (–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–±—ë–Ω–æ–∫)

**4.2 –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ**
- [ ] –ù–∞ –∞–≤–∞—Ç–∞—Ä–∫—É —Ä–µ–±—ë–Ω–∫–∞ –≤ —à–∞–ø–∫–µ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
- [ ] –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï (–ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞)

### –¢–µ—Å—Ç 1: selectedChildId
- [ ] –õ–æ–≥–∏–Ω ‚Üí selectedChildId —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ ‚Üí selectedChildId –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- [ ] –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Üí selectedChildId –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

### –¢–µ—Å—Ç 2: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- [ ] –ö–û–®–ï–õ–ï–ö –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ —ç—Ç–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞
- [ ] –ú–∏—Å—Å–∏–∏ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ ‚Äî —Ç–æ–ª—å–∫–æ —ç—Ç–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞
- [ ] –ù–∞–≥—Ä–∞–¥—ã ‚Äî —Ç–æ–ª—å–∫–æ —ç—Ç–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞
- [ ] –ò—Å—Ç–æ—Ä–∏—è ‚Äî —Ç–æ–ª—å–∫–æ —ç—Ç–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞

### –¢–µ—Å—Ç 3: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
- [ ] –ö–ª–∏–∫ –Ω–∞ —Ä–µ–±—ë–Ω–∫–∞ ‚Üí –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- [ ] –°—á—ë—Ç—á–∏–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- [ ] –ù–µ—Ç "–æ–±—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö"

---

## üìã –ü–û–†–Ø–î–û–ö –í–´–ü–û–õ–ù–ï–ù–ò–Ø

**–®–∞–≥ 1:** –ü–†–ò–û–†–ò–¢–ï–¢ 1 (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
- –î–æ–±–∞–≤–∏—Ç—å `selectedChildId`
- –°–æ–∑–¥–∞—Ç—å –≤–µ—Ä—Ö–Ω—é—é —à–∞–ø–∫—É
- –°–æ–∑–¥–∞—Ç—å —ç–∫—Ä–∞–Ω –ö–û–®–ï–õ–ï–ö
- –£–±—Ä–∞—Ç—å "–ú–æ–∏ –¥–µ—Ç–∏"

**–®–∞–≥ 2:** –ü–†–ò–û–†–ò–¢–ï–¢ 2 (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
- –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã
- –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏

**–®–∞–≥ 3:** –ü–†–ò–û–†–ò–¢–ï–¢ 3 (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
- –ö—Ä–∞—Å–Ω—ã–µ —Ü–∏—Ñ–µ—Ä–∫–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤

**–®–∞–≥ 4:** –ü–†–ò–û–†–ò–¢–ï–¢ 4 (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ)
- –§—É–Ω–∫—Ü–∏—è `switchChild()`
- –õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–®–∞–≥ 5:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –£–±–µ–¥–∏—Ç—å—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

---

## ‚è± –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò

- –ü–†–ò–û–†–ò–¢–ï–¢ 1: ~2-3 —á–∞—Å–∞
- –ü–†–ò–û–†–ò–¢–ï–¢ 2: ~1-2 —á–∞—Å–∞
- –ü–†–ò–û–†–ò–¢–ï–¢ 3: ~30 –º–∏–Ω—É—Ç
- –ü–†–ò–û–†–ò–¢–ï–¢ 4: ~1 —á–∞—Å
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: ~1 —á–∞—Å

**–ò—Ç–æ–≥–æ:** ~5-7 —á–∞—Å–æ–≤ —á–∏—Å—Ç–æ–π —Ä–∞–±–æ—Ç—ã

---

## üö® –ü–†–ê–í–ò–õ–ê –†–ê–ë–û–¢–´

1. **–û–¥–∏–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞ —Ä–∞–∑**
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ**
3. **–ë—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º**
4. **–ù–µ —Ç—Ä–æ–≥–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–µ–µ** (–ú–∏—Å—Å–∏–∏, –ú–∞–≥–∞–∑–∏–Ω, –ò–ò)
5. **–§–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å** (git commit –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞)

---

**–≠—Ç–æ—Ç —á–µ–∫-–ª–∏—Å—Ç ‚Äî –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–µ–∑ —Ö–∞–æ—Å–∞.**

